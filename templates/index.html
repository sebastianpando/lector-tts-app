<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Lector TTS</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<header>
  <h1>🗣️ Lector TTS</h1>
  <p class="muted">Pega texto (máx. 5.000 palabras), reproduce online y queda archivado.</p>
</header>

<section class="composer">
  <form method="post" action="/submit">
    <label for="title">Título (opcional)</label>
    <input id="title" name="title" type="text" placeholder="Ej: Cap. 1 - Lean Startup" value="{{ title or '' }}"/>

    <label for="text">Texto</label>
    <textarea id="text" name="text" rows="10" placeholder="Pega aquí tu texto…"></textarea>

    <button type="submit">🔊 Reproducir ahora</button>
    {% if error %}<div class="alert error">{{ error }}</div>{% endif %}
  </form>
</section>

<section class="player">
  <h2>Reproductor</h2>
  {% if token %}
    <audio id="player" controls autoplay src="/stream?token={{ token }}"></audio>
    <div class="meta">Reproduciendo: <strong>{{ title }}</strong></div>
  {% else %}
    <audio id="player" controls preload="none"></audio>
    <div class="meta muted">Envía un texto para empezar…</div>
  {% endif %}

  <div class="controls">
    <button id="back30">⏪ 30s</button>
    <button id="fwd30">⏩ 30s</button>
    <button id="stop">⏹ Detener</button>
  </div>
</section>

<section class="archive">
  <h2>Leídos</h2>
  {% if items %}
    <ul>
      {% for it in items %}
      <li>
        <button class="play" data-file="{{ it }}">▶</button>
        <a href="/audio/{{ it }}">{{ it }}</a>
        <button class="del" data-file="{{ it }}">🗑</button>
      </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="muted">Aún no hay lecturas archivadas.</p>
  {% endif %}
</section>

<footer><small>Uso personal. Motor TTS gratuito (gTTS).</small></footer>
<script src="/static/main.js"></script>
</body>
</html>
